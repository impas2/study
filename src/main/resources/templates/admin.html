<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang = "en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>Welcome!</h1>
<div th:replace="parts/loggeduser :: userInfo"></div>
<br>
<div>
<table border="1">
    <tr>
        <td>ID</td>
        <td>Username</td>
        <td>Email</td>
        <td>Roles</td>
        <td>Password hash</td>
    </tr>
    <tr th:each="user : ${allusers}">
        <form>
        <td th:utext="${user.id}" />
        <td th:utext="${user.username}" />
        <td th:utext="${user.email}" />
        <td th:utext="${user.roles}" />
        <td th:utext="${user.password}" />
        </form>
        <td><a th:href = "@{__${#httpServletRequest.requestURI}__edit}"/>Edit</td>
        <td><form th:action = "@{__${#httpServletRequest.requestURI}__delete/}" th:method="DELETE">
            <input type = "hidden" th:name = "id" th:value="${user.id}"/>
            <input type = "submit" name = "Delete"/>
        </form></td>
    </tr>
</table>
</div>
<div>
    <p><a th:href = "@{__${#httpServletRequest.requestURI}__add}">Add some users</a></p>
</div>
<div th:replace="parts/footer :: footer"></div>
</body>
</html>