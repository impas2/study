<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<tbody>
<tr th:each="user : ${allUsers}" th:id="userId + '_' + ${user.id}">
    <td th:utext="${user.id}"></td>
    <td th:utext="${user.firstname}"></td>
    <td th:utext="${user.lastname}"></td>
    <td th:utext="${user.age}"></td>
    <td th:utext="${user.username}"></td>
    <td th:utext="${user.roles}"></td>
    <td>
        <button class="btn btn-primary" th:data-user_id="userId + '_' + ${user.id}"
                data-toggle="modal" data-target="#edit-user-modal">Edit
        </button>
    </td>
    <td>
        <button class="btn btn-danger" th:data-user_id="userId + '_' + ${user.id}"
                data-toggle="modal" data-target="#delete-user-modal">
            Delete
        </button>
    </td>
</tr>
<tr id="userId_23">
    <td>23</td>
    <td>ffff</td>
    <td>ffff</td>
    <td>111</td>
    <td>fff</td>
    <td>[READER, USER, ADMIN]</td>
    <td>
        <button class="btn btn-primary" data-user_id="userId_23" data-toggle="modal" data-target="#edit-user-modal">Edit
        </button>
    </td>
    <td>
        <button class="btn btn-danger" data-user_id="userId_23" data-toggle="modal" data-target="#delete-user-modal">
            Delete
        </button>
    </td>
</tr>
</tbody>
</body>
</html>



$('#delete-user-modal').on('show.bs.modal', function (event) {
$(this).find('.modal-content')
let rowId = $(event.relatedTarget).data('user_id');
let cells = document.getElementById(rowId).getElementsByTagName("td");
for (let counter = 0; counter < 5; counter++) {
console.log(cells[counter].textContent);
}
document.getElementById('delete-user-id').value = cells[0].textContent;
document.getElementById('delete-user-firstname').value = cells[1].textContent;
document.getElementById('delete-user-lastname').value = cells[2].textContent;
document.getElementById('delete-user-age').value = cells[3].textContent;
document.getElementById('delete-user-email').value = cells[4].textContent;
document.getElementById('delete-user-roles').value = cells[5].textContent;

});

$('#edit-user-modal').on('show.bs.modal', function (event) {
$(this).find('.modal-content')
let rowId = $(event.relatedTarget).data('user_id');
let cells = document.getElementById(rowId).getElementsByTagName("td");
for (let counter = 0; counter < 5; counter++) {
console.log(cells[counter].textContent);
}
document.getElementById('edit-user-id').value = cells[0].textContent;
document.getElementById('edit-user-firstname').value = cells[1].textContent;
document.getElementById('edit-user-lastname').value = cells[2].textContent;
document.getElementById('edit-user-age').value = cells[3].textContent;
document.getElementById('edit-user-email').value = cells[4].textContent;
let selectBox = document.getElementById('edit-user-roles');
let stringValues = cells[5].textContent;
stringValues = stringValues.slice(1, stringValues.length - 1);
let arr = stringValues.split(",");

for (let counter = 0; counter < arr.length; counter++) {
for (let counterInner = 0; counterInner < selectBox.options.length; counterInner++) {
if (arr[counter].trim() === selectBox.options[counterInner].innerText) {
selectBox.options[counterInner].selected = "selected";
console.log('Role checked SUCCESS ' + arr[counter].trim());
}
}
}
});

$('#edit-user-modal').on('hide.bs.modal', function () {
let selectBox = document.getElementById('edit-user-roles');
for (let counterInner = 0; counterInner < selectBox.length; counterInner++) {
selectBox.options[counterInner].selected = "";
}
});

$('#delete-user-modal').on('hide.bs.modal', function () {
let selectBox = document.getElementById('edit-user-roles');
for (let counterInner = 0; counterInner < selectBox.length; counterInner++) {
selectBox.options[counterInner].selected = "";
}
});